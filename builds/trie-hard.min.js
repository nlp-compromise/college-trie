!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.trieHard=t()}}(function(){return function t(e,n,i){function r(u,a){if(!n[u]){if(!e[u]){var s="function"==typeof require&&require;if(!a&&s)return s(u,!0);if(o)return o(u,!0);var c=new Error("Cannot find module '"+u+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[u]={exports:{}};e[u][0].call(f.exports,function(t){var n=e[u][1][t];return r(n?n:t)},f,f.exports,t,e,n,i)}return n[u].exports}for(var o="function"==typeof require&&require,u=0;u<i.length;u++)r(i[u]);return r}({1:[function(t,e,n){"use strict";e.exports={L1:1024,L2:32,W:6}},{}],2:[function(t,e,n){"use strict";var i=t("./unpack"),r=t("./pack/trie"),o=t("./rankDirectory"),u=t("./config"),a=t("./normalize"),s=function(t){var e=new r;t.sort(),t.forEach(function(t){t=a(t),e.insert(t)});var n=e.encode(),i=e.getNodeCount(),s=o.Create(n,2*i+1,u.L1,u.L2);return{data:n,directory:s.getData(),nodes:i}};e.exports={pack:s,unpack:i}},{"./config":1,"./normalize":3,"./pack/trie":5,"./rankDirectory":6,"./unpack":9}],3:[function(t,e,n){"use strict";var i={0:"qxq",1:"qzq",2:"qxz",3:"qqx",4:"qqz",5:"xqz",6:"xqx",7:"xqq",8:"zxq",9:"zqx"," ":"zzx","'":"zzq"},r=function(t){return t=t.replace(/[0-9 ']/g,function(t){return i[t]})};e.exports=r},{}],4:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t){return s[t]}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=t("../config"),a=u.W,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",c=function(){function t(){i(this,t),this.bits=[]}return o(t,[{key:"write",value:function(t,e){for(var n=e-1;n>=0;n--)t&1<<n?this.bits.push(1):this.bits.push(0)}},{key:"getData",value:function(){for(var t=[],e=0,n=0,i=0;i<this.bits.length;i++)e=e<<1|this.bits[i],n+=1,n===a&&(t.push(r(e)),n=e=0);return n&&t.push(r(e<<a-n)),t.join("")}},{key:"getDebugString",value:function(t){for(var e=[],n=0,i=0;i<this.bits.length;i++)e.push(""+this.bits[i]),n++,n===t&&(e.push(" "),n=0);return e.join("")}}]),t}();e.exports=c},{"../config":1}],5:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=t("./bitWriter"),u=function t(e){i(this,t),this.letter=e,this.final=!1,this.children=[]},a=function(){function t(){i(this,t),this.previousWord="",this.root=new u(" "),this.cache=[this.root],this.nodeCount=1}return r(t,[{key:"getNodeCount",value:function(){return this.nodeCount}},{key:"insert",value:function(t){for(var e=0,n=0;n<Math.min(t.length,this.previousWord.length)&&t[n]===this.previousWord[n];n++)e+=1;this.cache.length=e+1;var i=this.cache[this.cache.length-1];for(n=e;n<t.length;n++){var r=new u(t[n]);this.nodeCount++,i.children.push(r),this.cache.push(r),i=r}i.final=!0,this.previousWord=t}},{key:"apply",value:function(t){for(var e=[this.root];e.length>0;){for(var n=e.shift(),i=0;i<n.children.length;i++)e.push(n.children[i]);t(n)}}},{key:"encode",value:function(){var t=new o;t.write(2,2),this.apply(function(e){for(var n=0;n<e.children.length;n++)t.write(1,1);t.write(0,1)});var e="a".charCodeAt(0);return this.apply(function(n){var i=n.letter.charCodeAt(0)-e;n.final&&(i|=32),t.write(i,6)}),t.getData()}}]),t}();e.exports=a},{"./bitWriter":4}],6:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=t("./unpack/bitString"),u=t("./pack/bitWriter"),a=function(){function t(e,n,r,u,a){i(this,t),this.directory=new o(e),this.data=new o(n),this.l1Size=u,this.l2Size=a,this.l1Bits=Math.ceil(Math.log(r)/Math.log(2)),this.l2Bits=Math.ceil(Math.log(u)/Math.log(2)),this.sectionBits=(u/a-1)*this.l2Bits+this.l1Bits,this.numBits=r}return r(t,[{key:"getData",value:function(){return this.directory.getData()}},{key:"rank",value:function t(e,n){if(0===e)return n-this.rank(1,n)+1;var t=0,i=n,r=0;return i>=this.l1Size&&(r=(i/this.l1Size|0)*this.sectionBits,t=this.directory.get(r-this.l1Bits,this.l1Bits),i%=this.l1Size),i>=this.l2Size&&(r+=(i/this.l2Size|0)*this.l2Bits,t+=this.directory.get(r-this.l2Bits,this.l2Bits)),t+=this.data.count(n-n%this.l2Size,n%this.l2Size+1)}},{key:"select",value:function(t,e){for(var n=this.numBits,i=-1,r=-1;n-i>1;){var o=(n+i)/2|0,u=this.rank(t,o);u===e?(r=o,n=o):u<e?i=o:n=o}return r}}]),t}();a.Create=function(t,e,n,i){for(var r=new o(t),s=0,c=0,f=0,h=0,l=Math.ceil(Math.log(e)/Math.log(2)),d=Math.ceil(Math.log(n)/Math.log(2)),g=new u;s+i<=e;)h+=r.count(s,i),c+=i,s+=i,c===n?(f+=h,g.write(f,l),h=0,c=0):g.write(h,d);return new a(g.getData(),t,e,n,i)},e.exports=a},{"./pack/bitWriter":4,"./unpack/bitString":7}],7:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t){return s[t]}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=t("../config"),a=u.W,s={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"-":62,_:63},c=[63,31,15,7,3,1,0],f=[0,1,1,2,1,2,2,3,1,2,2,3,2,3,3,4,1,2,2,3,2,3,3,4,2,3,3,4,3,4,4,5,1,2,2,3,2,3,3,4,2,3,3,4,3,4,4,5,2,3,3,4,3,4,4,5,3,4,4,5,4,5,5,6,1,2,2,3,2,3,3,4,2,3,3,4,3,4,4,5,2,3,3,4,3,4,4,5,3,4,4,5,4,5,5,6,2,3,3,4,3,4,4,5,3,4,4,5,4,5,5,6,3,4,4,5,4,5,5,6,4,5,5,6,5,6,6,7,1,2,2,3,2,3,3,4,2,3,3,4,3,4,4,5,2,3,3,4,3,4,4,5,3,4,4,5,4,5,5,6,2,3,3,4,3,4,4,5,3,4,4,5,4,5,5,6,3,4,4,5,4,5,5,6,4,5,5,6,5,6,6,7,2,3,3,4,3,4,4,5,3,4,4,5,4,5,5,6,3,4,4,5,4,5,5,6,4,5,5,6,5,6,6,7,3,4,4,5,4,5,5,6,4,5,5,6,5,6,6,7,4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8],h=function(){function t(e){i(this,t),this.bytes=e,this.length=this.bytes.length*a}return o(t,[{key:"getData",value:function(){return this.bytes}},{key:"get",value:function(t,e){if(t%a+e<=a)return(r(this.bytes[t/a|0])&c[t%a])>>a-t%a-e;var n=r(this.bytes[t/a|0])&c[t%a],i=a-t%a;for(t+=i,e-=i;e>=a;)n=n<<a|r(this.bytes[t/a|0]),t+=a,e-=a;return e>0&&(n=n<<e|r(this.bytes[t/a|0])>>a-e),n}},{key:"count",value:function t(e,n){for(var t=0;n>=8;)t+=f[this.get(e,8)],e+=8,n-=8;return t+f[this.get(e,n)]}},{key:"rank",value:function t(e){for(var t=0,n=0;n<=e;n++)this.get(n,1)&&t++;return t}}]),t}();e.exports=h},{"../config":1}],8:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=t("./bitString"),u=t("../rankDirectory"),a=t("../normalize"),s=t("../config"),c=function(){function t(e,n,r,o,u,a){i(this,t),this.trie=e,this.index=n,this.letter=r,this.final=o,this.firstChild=u,this.childCount=a}return r(t,[{key:"getChildCount",value:function(){return this.childCount}},{key:"getChild",value:function(t){return this.trie.getNodeByIndex(this.firstChild+t)}}]),t}(),f=function(){function t(e,n,r){i(this,t),this.data=new o(e),this.directory=new u(n,e,2*r+1,s.L1,s.L2),this.letterStart=2*r+1}return r(t,[{key:"getNodeByIndex",value:function(t){var e=1===this.data.get(this.letterStart+6*t,1),n=String.fromCharCode(this.data.get(this.letterStart+6*t+1,5)+"a".charCodeAt(0)),i=this.directory.select(0,t+1)-t,r=this.directory.select(0,t+2)-t-1;return new c(this,t,n,e,i,r-i)}},{key:"getRoot",value:function(){return this.getNodeByIndex(0)}},{key:"lookup",value:function(t){t=a(t);for(var e=this.getRoot(),n=0;n<t.length;n++){for(var i,r=0;r<e.getChildCount()&&(i=e.getChild(r),i.letter!==t[n]);r++);if(r===e.getChildCount())return!1;e=i}return e.final}}]),t}();e.exports=f},{"../config":1,"../normalize":3,"../rankDirectory":6,"./bitString":7}],9:[function(t,e,n){"use strict";var i=t("./frozenTrie"),r=function(t){var e=new i(t.data,t.directory,t.nodes);return e};e.exports=r},{"./frozenTrie":8}]},{},[2])(2)});
