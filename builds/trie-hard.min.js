!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.trieHard=e()}}(function(){return function e(t,n,i){function r(s,u){if(!n[s]){if(!t[s]){var f="function"==typeof require&&require;if(!u&&f)return f(s,!0);if(o)return o(s,!0);var a=new Error("Cannot find module '"+s+"'");throw a.code="MODULE_NOT_FOUND",a}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return r(n?n:e)},c,c.exports,e,t,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(e,t,n){"use strict";t.exports={NODE_SEP:";",STRING_SEP:",",TERMINAL_PREFIX:"!",BASE:36}},{}],2:[function(e,t,n){"use strict";var i=e("./config"),r=function(e){var t,n,r,o="";for(t=1,n=i.BASE;e>=n;e-=n,t++,n*=i.BASE);for(;t--;)r=e%i.BASE,o=String.fromCharCode((r<10?48:55)+r)+o,e=(e-r)/i.BASE;return o},o=function(e){var t,n,r,o,s,u=0;for(t=1,n=i.BASE;t<e.length;u+=n,t++,n*=i.BASE);for(o=e.length-1,r=1;o>=0;o--,r*=i.BASE)s=e.charCodeAt(o)-48,s>10&&(s-=7),u+=s*r;return u},s=function(e){e.sort();for(var t=1;t<e.length;t++)e[t-1]===e[t]&&e.splice(t,1)},u=function(e,t){for(var n=Math.min(e.length,t.length);n>0;){var i=e.slice(0,n);if(i===t.slice(0,n))return i;n-=1}return""};t.exports={toAlphaCode:r,fromAlphaCode:o,unique:s,commonPrefix:u}},{"./config":1}],3:[function(e,t,n){"use strict";t.exports={pack:e("./pack/index"),unpack:e("./unpack/index")}},{"./pack/index":5,"./unpack/index":7}],4:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(){i(this,e),this.counts={}}return r(e,[{key:"init",value:function(e){void 0===this.counts[e]&&(this.counts[e]=0)}},{key:"add",value:function(e,t){void 0===t&&(t=1),this.init(e),this.counts[e]+=t}},{key:"change",value:function(e,t,n){void 0===n&&(n=1),this.add(t,-n),this.add(e,n)}},{key:"countOf",value:function(e){return this.init(e),this.counts[e]}},{key:"highest",value:function(e){for(var t=[],n=Object.keys(this.counts),i=0;i<n.length;i++){var r=n[i];t.push([r,this.counts[r]])}return t.sort(function(e,t){return t[1]-e[1]}),e&&(t=t.slice(0,e)),t}}]),e}();t.exports=o},{}],5:[function(e,t,n){"use strict";var i=e("./trie"),r=function(e){var t=new i(e);return t.pack()};t.exports=r},{"./trie":6}],6:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=e("../fns"),u=e("../config"),f=e("./histogram"),a=function(){function e(t){i(this,e),this.root={},this.lastWord="",this.suffixes={},this.suffixCounts={},this.cNext=1,this.wordCount=0,this.insertWords(t),this.vCur=0}return o(e,[{key:"insertWords",value:function(e){if(void 0!==e){"string"==typeof e&&(e=e.split(/[^a-zA-Z]+/));for(var t=0;t<e.length;t++)e[t]=e[t].toLowerCase();s.unique(e);for(var n=0;n<e.length;n++)this.insert(e[n])}}},{key:"insert",value:function(e){this._insert(e,this.root);var t=this.lastWord;this.lastWord=e;var n=s.commonPrefix(e,t);if(n!==t){var i=this.uniqueNode(t,e,this.root);i&&this.combineSuffixNode(i)}}},{key:"_insert",value:function(e,t){var n=void 0,i=void 0;if(0!==e.length){for(var o=Object.keys(t),u=0;u<o.length;u++){var f=o[u];if(n=s.commonPrefix(e,f),0!==n.length){if(f===n&&"object"===r(t[f]))return void this._insert(e.slice(n.length),t[f]);if(f===e&&"number"==typeof t[f])return;return i={},i[f.slice(n.length)]=t[f],this.addTerminal(i,e=e.slice(n.length)),delete t[f],t[n]=i,void this.wordCount++}}this.addTerminal(t,e),this.wordCount++}}},{key:"addTerminal",value:function(e,t){if(t.length<=1)return void(e[t]=1);var n={};e[t[0]]=n,this.addTerminal(n,t.slice(1))}},{key:"nodeProps",value:function(e,t){var n=[];for(var i in e)""!==i&&"_"!==i[0]&&(t&&"object"!==r(e[i])||n.push(i));return n.sort(),n}},{key:"optimize",value:function(){this.combineSuffixNode(this.root),this.prepDFS(),this.countDegree(this.root),this.prepDFS(),this.collapseChains(this.root)}},{key:"combineSuffixNode",value:function(e){if(e._c)return e;var t=[];this.isTerminal(e)&&t.push("!");for(var n=this.nodeProps(e),i=0;i<n.length;i++){var o=n[i];"object"===r(e[o])?(e[o]=this.combineSuffixNode(e[o]),t.push(o),t.push(e[o]._c)):t.push(o)}t=t.join("-");var s=this.suffixes[t];return s?s:(this.suffixes[t]=e,e._c=this.cNext++,e)}},{key:"prepDFS",value:function(){this.vCur++}},{key:"visited",value:function(e){return e._v===this.vCur||(e._v=this.vCur,!1)}},{key:"countDegree",value:function(e){if(void 0===e._d&&(e._d=0),e._d++,!this.visited(e))for(var t=this.nodeProps(e,!0),n=0;n<t.length;n++)this.countDegree(e[t[n]])}},{key:"collapseChains",value:function(e){var t=void 0,n=void 0,i=void 0,o=void 0;if(!this.visited(e)){for(n=this.nodeProps(e),o=0;o<n.length;o++)t=n[o],i=e[t],"object"===("undefined"==typeof i?"undefined":r(i))&&(this.collapseChains(i),void 0===i._g||1!==i._d&&1!==i._g.length||(delete e[t],t+=i._g,e[t]=i[i._g]));1!==n.length||this.isTerminal(e)||(e._g=t)}}},{key:"isWord",value:function(e){return this.isFragment(e,this.root)}},{key:"isTerminal",value:function(e){return!!e[""]}},{key:"isFragment",value:function(e,t){if(0===e.length)return this.isTerminal(t);if(1===t[e])return!0;for(var n=this.nodeProps(t,!0),i=0;i<n.length;i++){var r=n[i];if(r===e.slice(0,r.length))return this.isFragment(e.slice(r.length),t[r])}return!1}},{key:"uniqueNode",value:function(e,t,n){for(var i=this.nodeProps(n,!0),r=0;r<i.length;r++){var o=i[r];if(o===e.slice(0,o.length))return o!==t.slice(0,o.length)?n[o]:this.uniqueNode(e.slice(o.length),t.slice(o.length),n[o])}}},{key:"pack",value:function(){function e(e){var t="",n="";r.isTerminal(e)&&(t+=u.TERMINAL_PREFIX);for(var i=r.nodeProps(e),o=0;o<i.length;o++){var f=i[o];if("number"!=typeof e[f])if(c[e[f]._n])t+=n+f+c[e[f]._n],n="";else{var a=s.toAlphaCode(e._n-e[f]._n-1+h);e[f]._g&&a.length>=e[f]._g.length&&1===e[e[f]._g]?(a=e[f]._g,t+=n+f+a,n=u.STRING_SEP):(t+=n+f+a,n="")}else t+=n+f,n=u.STRING_SEP}return t}function t(e){if(void 0===e._n){for(var n=r.nodeProps(e,!0),i=0;i<n.length;i++)t(e[n[i]]);e._n=l++,o.unshift(e)}}function n(e){if(!r.visited(e))for(var t=r.nodeProps(e,!0),i=0;i<t.length;i++){var o=t[i],f=e._n-e[o]._n-1;f<u.BASE&&v.add(f),d.add(e[o]._n,s.toAlphaCode(f).length-1),n(e[o])}}function i(){d=d.highest(u.BASE);var e=[];e[-1]=0;for(var t=0,n=0,i=3+s.toAlphaCode(a).length,r=0;r<u.BASE&&void 0!==d[r];r++)e[r]=d[r][1]-i-v.countOf(u.BASE-r-1)+e[r-1],e[r]>=t&&(t=e[r],n=r+1);return n}var r=this,o=[],a=void 0,c={},h=void 0,l=0;this.optimize();var d=new f,v=new f;t(this.root,0),a=o.length,this.prepDFS(),n(this.root),h=i();for(var p=0;p<h;p++)c[d[p][0]]=s.toAlphaCode(p);for(var g=0;g<a;g++)o[g]=e(o[g]);for(var y=h-1;y>=0;y--)o.unshift(s.toAlphaCode(y)+":"+s.toAlphaCode(a-d[y][0]-1));return o.join(u.NODE_SEP)}}]),e}();t.exports=a},{"../config":1,"../fns":2,"./histogram":4}],7:[function(e,t,n){"use strict";var i=e("./ptrie"),r=function(e){return new i(e)};t.exports=r},{"./ptrie":8}],8:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=e("../config"),s=e("../fns"),u=new RegExp("([a-z ]+)("+o.STRING_SEP+"|[0-9A-Z]+|$)","g"),f=new RegExp("([0-9A-Z]+):([0-9A-Z]+)"),a="zzzzzzzzzz",c=function(){function e(t){for(i(this,e),this.nodes=t.split(o.NODE_SEP),this.syms=[],this.symCount=0;;){var n=f.exec(this.nodes[0]);if(!n)break;this.syms[s.fromAlphaCode(n[1])]=s.fromAlphaCode(n[2]),this.symCount++,this.nodes.shift()}}return r(e,[{key:"has",value:function(e){return""!==e&&this.match(e)===e}},{key:"match",value:function(e){var t=this.matches(e);return 0===t.length?"":t[t.length-1]}},{key:"matches",value:function(e){return this.words(e,e+"a")}},{key:"max",value:function(){return a}},{key:"words",value:function e(t,n,i){function r(t){return e.length>=i?void(this.abort=!0):void e.push(t)}var e=[];return void 0===t&&(t=""),"number"==typeof n&&(i=n,n=void 0),void 0===n&&(n=this.beyond(t)),this.enumerate(0,"",{from:t,beyond:n,fn:r,prefixes:t+"a"===n}),e}},{key:"enumerate",value:function(e,t,n){function i(e){return n.prefixes?void(e===n.from.slice(0,e.length)&&n.fn(e)):void(n.from<=e&&e<n.beyond&&n.fn(e))}var r=this.nodes[e],s=this;if(r[0]===o.TERMINAL_PREFIX){if(i(t),n.abort)return;r=r.slice(1)}r.replace(u,function(r,u,f){var a=t+u;if(!(n.abort||a>=n.beyond||a<n.from.slice(0,a.length))){var c=f===o.STRING_SEP||""===f;return c?void i(a):void s.enumerate(s.inodeFromRef(f,e),a,n)}})}},{key:"inodeFromRef",value:function(e,t){var n=s.fromAlphaCode(e);return n<this.symCount?this.syms[n]:t+n+1-this.symCount}},{key:"beyond",value:function(e){if(0===e.length)return this.max();var t=e.charCodeAt(e.length-1);return e.slice(0,-1)+String.fromCharCode(t+1)}}]),e}();t.exports=c},{"../config":1,"../fns":2}]},{},[3])(3)});
